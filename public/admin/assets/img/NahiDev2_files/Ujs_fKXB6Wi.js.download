;/*FB_PKG_DELIM*/

__d("useOnFirstImpression",["react","react-compiler-runtime","usePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState;function j(a,b){var e=d("react-compiler-runtime").c(4),f=i(null),g=f[0],h=f[1];e[0]!==a||e[1]!==b||e[2]!==g?(f={onImpressionStart:function(){if(g===b)return;a();h(b)}},e[0]=a,e[1]=b,e[2]=g,e[3]=f):f=e[3];return c("usePartialViewImpression")(f)}function a(a){return j(a,!0)}g.useOnFirstImpressionWithDependency=j;g.useOnFirstImpression=a}),98);
__d("MWCreatorMessagingLoggingUtils",["I64","LSAuthorityLevel","MWPActor.react","MessagingThreadSubtype","QPLUserFlow","ReQL","WAHashStringToNumber","qpl","react","react-compiler-runtime","useAsyncReStore","useOnFirstImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");j.useCallback;var k=j.useRef,l=function(a){if(!d("MWPActor.react").isAPPlus())return!1;if(a.threadSubtype==null)return!1;a=(i||(i=d("I64"))).to_float(a.threadSubtype);return a===c("MessagingThreadSubtype").PAGE_TO_USER||a===c("MessagingThreadSubtype").PAGE_TO_PAGE};function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=function(){d("MWPActor.react").isAPPlus()&&(c("QPLUserFlow").start(c("qpl")._(421081035,"621"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}),c("QPLUserFlow").endSuccess(c("qpl")._(421081035,"621"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}))},b[0]=a,b[1]=e):e=b[1];return d("useOnFirstImpression").useOnFirstImpression(e)}function b(a,b){d("MWPActor.react").isAPPlus()&&c("QPLUserFlow").start(c("qpl")._(421077156,"777"),{annotations:{string:{messagingEntrypoint:b}},instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function e(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=function(){d("MWPActor.react").isAPPlus()&&c("QPLUserFlow").endSuccess(c("qpl")._(421077156,"777"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber((i||(i=d("I64"))).to_string(a))})},b[0]=a,b[1]=e):e=b[1];return d("useOnFirstImpression").useOnFirstImpression(e)}function f(){var a=d("react-compiler-runtime").c(2),b=c("useAsyncReStore")(),e=k(null),f;a[0]!==b?(f=function(a){if(!l(a))return;c("QPLUserFlow").endSuccess(c("qpl")._(421070823,"2981"),{annotations:{string:{action:"accept"}},instanceKey:(i||(i=d("I64"))).to_int32(a.threadKey)});c("QPLUserFlow").start(c("qpl")._(421082877,"916"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(i.to_string(a.threadKey))});b.then(function(b){e.current=d("ReQL").fromTableDescending(b.tables.messages).subscribe(function(b,f){if(f.operation==="add"||f.operation==="put"){b=f.value;f=(i||(i=d("I64"))).to_int32(b.authorityLevel)>=c("LSAuthorityLevel").SERVER_PARTIAL;var g=i.equal(b.threadKey,a.threadKey);if(f&&g){f=(i||(i=d("I64"))).to_float(b.sendStatusV2);f===4||f===5?c("QPLUserFlow").endFailure(c("qpl")._(421082877,"916"),"message_send_error",{instanceKey:d("WAHashStringToNumber").hashStringToNumber((i||(i=d("I64"))).to_string(a.threadKey))}):c("QPLUserFlow").endSuccess(c("qpl")._(421082877,"916"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber((i||(i=d("I64"))).to_string(a.threadKey))});e.current==null||e.current()}}})})},a[0]=b,a[1]=f):f=a[1];return f}g.useLogOnMessageButtonImpression=a;g.logOnMessageButtonClick=b;g.useLogOnThreadViewImpression=e;g.useLogOnMessageSend=f}),98);