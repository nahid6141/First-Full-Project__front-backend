;/*FB_PKG_DELIM*/

__d("CometUnifiedVideoCreationDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24640021982321583"}),null);
__d("CometUnifiedVideoCreationDialogQuery$Parameters",["CometUnifiedVideoCreationDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometUnifiedVideoCreationDialogQuery_facebookRelayOperation"),metadata:{},name:"CometUnifiedVideoCreationDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometUnifiedVideoCreationDialog.entrypoint",["CometUnifiedVideoCreationDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var c=a.group_id;a=a.page_id;a=a!=null?String(a):"";return{queries:{reelsCreateQueryReference:{parameters:b("CometUnifiedVideoCreationDialogQuery$Parameters"),variables:{group_id:c,page_id:a}}}}},root:c("JSResourceForInteraction")("CometUnifiedVideoCreationDialog.react").__setRef("CometUnifiedVideoCreationDialog.entrypoint")};g["default"]=a}),98);
__d("CometUnifiedVideoCreationPermalinkDialog.entrypoint",["CometUnifiedVideoCreationDialog.entrypoint","JSResourceForInteraction","NestedRelayEntryPointBuilderUtils"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{entryPoints:{reelsCreateDialogReference:d("NestedRelayEntryPointBuilderUtils").NestedRelayEntryPoint({entryPoint:c("CometUnifiedVideoCreationDialog.entrypoint"),entryPointParams:a})},queries:{}}},root:c("JSResourceForInteraction")("CometUnifiedVideoCreationPermalinkDialog.react").__setRef("CometUnifiedVideoCreationPermalinkDialog.entrypoint")};g["default"]=a}),98);
__d("ProfileCometComposerRootQuery$Parameters",["CometUnifiedVideoCreation_showPrivacyMerge.relayprovider","ProfileCometComposerRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("ProfileCometComposerRootQuery_facebookRelayOperation"),metadata:{},name:"ProfileCometComposerRootQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__CometUnifiedVideoCreation_showPrivacyMergerelayprovider:b("CometUnifiedVideoCreation_showPrivacyMerge.relayprovider")}}};e.exports=a}),null);
__d("ProfileCometComposerDialog.entrypoint",["JSResourceForInteraction","ProfileCometComposerRootQuery$Parameters","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.profileID;return{queries:{composerQueryReference:{options:{fetchPolicy:"store-or-network"},parameters:c("ProfileCometComposerRootQuery$Parameters"),variables:{privacySelectorRenderLocation:"COMET_COMPOSER",profile_id:a,scale:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("ProfileCometComposerDialog.react").__setRef("ProfileCometComposerDialog.entrypoint")};g["default"]=a}),98);
__d("XCometReelsCreationControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/reels/create/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("useProfileCometComposerDialog",["cr:1963","react-compiler-runtime","useCometComposerEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e,f=d("react-compiler-runtime").c(3);e=(e=a.composerType)!=null?e:"profile";var g;f[0]!==a||f[1]!==e?(g=babelHelpers["extends"]({},a,{composerDialogEntryPoint:b("cr:1963"),composerType:e}),f[0]=a,f[1]=e,f[2]=g):g=f[2];return c("useCometComposerEntryPointDialog")(g)}g["default"]=a}),98);
__d("useProfileCometComposerTrigger",["CometComposerAttachmentPluginTypes","CometComposerDraftingUtils","CometComposerFooterAttachmentPluginTypes","CometUnifiedVideoAndReelsGating","FBLogger","JSResourceForInteraction","ProfileCometLifeEventsComposerState","QPLUserFlow","cometComposerLexicalCreateEditor","getComposerUnsavedChangesAlert","gkx","qpl","react","useCometInteractionTracing","useComposerTerminalEventLog","useOnBeforeUnload","usePostInProgress","useProfileCometComposerDialog","useResumableComposerViewState"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useRef,l=c("JSResourceForInteraction")("ProfileCometComposerDialog.react").__setRef("useProfileCometComposerTrigger");function a(a,b,e,f,g){var h=k(!1),m=k([]),n=c("useResumableComposerViewState")(),o=n.clearResumableViewState,p=n.getResumableViewState,q=n.saveResumableViewState;n=c("usePostInProgress")();var r=n.postPlainText,s=n.updatePostPlainText,t=k(null);j(function(){var a=!0;t==null&&d("CometComposerDraftingUtils").canDraftPosts()&&d("CometComposerDraftingUtils").shouldShowDraftsInline()&&d("CometComposerDraftingUtils").getDraftFromIndexedDB().then(function(b){if(a&&b!=null){b=(b=b.result)==null?void 0:b.draftViewState;var c=b==null?void 0:b.draftedPostText;c!=null&&c!==""&&s(b);t.current=b}})["catch"](function(a){c("FBLogger")("comet_composer").mustfix("Experienced error during post draft retrieval: "+a)});return function(){a=!1}},[]);var u=k(!1),v=k(!1);c("useOnBeforeUnload")(function(){m.current!=null&&m.current.forEach(function(a){return a()});if(u.current===!0&&!d("CometComposerDraftingUtils").canDraftPosts())return c("getComposerUnsavedChangesAlert")(p())});c("useComposerTerminalEventLog")(function(){return u.current},function(){return p().creationSessionID});n=i(function(a){if(h.current===!0||v.current===!0||!d("CometComposerDraftingUtils").shouldShowDraftsInline())u.current=!1,o(),s(p());else{var b;u.current=(b=a==null?void 0:a.isDirty)!=null?b:!1;q(a);s(p())}},[o,p,q,s]);var w=function(a,b){h.current=!1,b!=null&&(m.current=[].concat(m.current,[b]))},x=function(){u.current=!0,h.current=!1},y=function(){h.current=!0},z=function(){v.current=!0,t.current=null,d("CometComposerDraftingUtils").deleteDraftFromIndexedDB()["catch"](function(a){c("FBLogger")("comet_composer").mustfix("Experienced error when trying to delete draft: "+a)})},A=function(){v.current=!1};n=c("useProfileCometComposerDialog")({composerEntryPointName:"inline_composer",composerSourceSurface:"timeline",localBackupTargetID:a,onBeforeClose:n,onDeleteDraft:z,onSave:w,onSaveDraft:A,onSaveError:x,onSubmit:y,profileID:a,title:b,tracePolicy:"comet.composer.profile"});var B=n[0];z=n[1];w=n[2];A=n[3];x=n[4];var C=c("useCometInteractionTracing")(c("qpl")._(30605360,"8900"),"responsive","INTERACTION");y=i(function(a){u.current=!1,d("CometComposerDraftingUtils").canDraftPosts()?t.current!=null?D(a,t.current):d("CometComposerDraftingUtils").getDraftFromIndexedDB().then(function(b){if(b!=null){b=(b=b.result)==null?void 0:b.draftViewState;D(a,b)}else E(a)})["catch"](function(b){c("FBLogger")("comet_composer").mustfix("Experienced error during post draft retrieval: "+b),E(a)}):E(a)},[]);return[y,z,w,A,x,r];function D(a,b){var d=b==null?void 0:b.serializedLexicalEditorState;if(b!=null&&d!=null){var e=c("cometComposerLexicalCreateEditor")();e.setEditorState(e.parseEditorState(d));d=babelHelpers["extends"]({},b,{lexicalEditor:e});E(a,d)}else E(a)}function E(b,h){var i=c("gkx")("20836"),j=h!=null?h:p(b==null?void 0:b.additionalMediaAttachmentItems,{startWithHeaderTextStyle:i});g!=null&&(j=babelHelpers["extends"]({},j,g));j=babelHelpers["extends"]({},j,{videoComposerData:{shouldOpenVideoSpecificComposer:e,targetID:a,wasCreatedViaUnifiedVideoFlow:d("CometUnifiedVideoAndReelsGating").shouldShowUnifiedVideoEditor()}});if((b==null?void 0:b.pushedPageOnLoad)==="get_messages")j=babelHelpers["extends"]({},j,{attachmentArea:babelHelpers["extends"]({},j.attachmentArea,{activeAttachmentType:c("CometComposerAttachmentPluginTypes").GET_MESSAGES}),isGetMessagesPost:!0,isGetMessagesPostAttachmentOptional:!0});else if((b==null?void 0:b.pushedPageOnLoad)==="get_whatsapp_messages")j=babelHelpers["extends"]({},j,{footerAttachmentArea:{activeFooterAttachmentType:d("CometComposerFooterAttachmentPluginTypes").CometComposerFooterAttachmentPluginTypes.GET_WHATSAPP_MESSAGES},isGetWhatsAppMessagePost:!0,isGetWhatsappMessagesPostAttachmentOptional:f});else if((b==null?void 0:b.pushedPageOnLoad)==="mle"){j=babelHelpers["extends"]({},j,{majorLifeEvent:babelHelpers["extends"]({},(h=j.majorLifeEvent)!=null?h:d("ProfileCometLifeEventsComposerState").getInitialState(),{isFromMegaMenu:(i=b==null?void 0:b.isFromMegaMenu)!=null?i:!1})})}var k=l.getModuleIfRequireable()!=null;c("QPLUserFlow").start(c("qpl")._(316544852,"610"),{annotations:{bool:{revisit:k}}});C(function(a){a.onComplete(function(b){k&&a.addMetadata("revisit",1)}),B({beginningViewState:j,pushedPageOnLoad:b==null?void 0:b.pushedPageOnLoad})})}}g["default"]=a}),98);
__d("useProfileCometInlineComposer",["fbt","CometRouteParams","react","react-compiler-runtime","useProfileCometComposerTrigger"],(function(a,b,c,d,e,f,g,h){"use strict";var i;b=i||d("react");var j=b.startTransition,k=b.useEffect,l=b.useRef;function a(a){var b=d("react-compiler-runtime").c(12),e=a.beginningViewState,f=a.isGetWhatsAppMessagesPostAttachmentOptional,g=a.profileID;a=a.shouldOpenVideoSpecificComposer;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"Create post"),b[0]=i):i=b[0];i=i;i=c("useProfileCometComposerTrigger")(g,i,a,f,e);var m=i[0];a=i[1];f=i[2];e=i[3];var n=i[4];i=i[5];var o=d("CometRouteParams").useRouteParams(),p=l(null),q=String(o==null?void 0:o.modal);b[1]!==m||b[2]!==q||b[3]!==g?(o=function(){if(p.current===g)return;q!=="null"&&(p.current=g);q==="composer"?j(function(){return m()}):q==="composer_whatsapp_message"?j(function(){return m({pushedPageOnLoad:"get_whatsapp_messages"})}):q==="composer_message"?j(function(){return m({pushedPageOnLoad:"get_messages"})}):q==="marketplace_jobs"&&j(function(){return m({pushedPageOnLoad:"marketplace_jobs"})})},b[1]=m,b[2]=q,b[3]=g,b[4]=o):o=b[4];k(o,void 0);b[5]!==m||b[6]!==f||b[7]!==e||b[8]!==n||b[9]!==i||b[10]!==a?(o=[m,a,f,e,n,i],b[5]=m,b[6]=f,b[7]=e,b[8]=n,b[9]=i,b[10]=a,b[11]=o):o=b[11];return o}g["default"]=a}),226);
__d("useShowCometUnifiedVideoCreationDialog",["CometUnifiedVideoCreationDialog.entrypoint","react-compiler-runtime","useCometEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(8);a=c("useCometEntryPointDialog")(c("CometUnifiedVideoCreationDialog.entrypoint"),a);var e=a[0],f=a[1],g=a[2],h=a[3];a=a[4];var i;b[0]!==e?(i=function(a){return e(a)},b[0]=e,b[1]=i):i=b[1];i=i;var j;b[2]!==a||b[3]!==f||b[4]!==g||b[5]!==i||b[6]!==h?(j=[i,f,g,h,a],b[2]=a,b[3]=f,b[4]=g,b[5]=i,b[6]=h,b[7]=j):j=b[7];return j}g["default"]=a}),98);